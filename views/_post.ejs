<!--set the id of the post-->

<div class="post-wrapper" id="post-<%= post._id%>">
  <div class="post-header">
    <div class="post-avatar">
      <img src="<%=post.user.avatar %>" alt="user-pic" />

      <div>
        <span class="post-author"> <%= post.user.name %></span>
        <span class="post-time">a minute ago</span>
      </div>
    </div>

    <div class="post-content"><%= post.content %></div>

    <div class="post-actions">
      <!-- CHANGE :: display the likes of this post, if the user is logged in, then show the link to toggle likes, else, just show the count -->
      <!-- study about the data attribute -->
      <small class="post-like">
        <img
          src="https://cdn-icons.flaticon.com/png/512/210/premium/210545.png?token=exp=1643293212~hmac=60f900047914e3528898eb90e89cf2cd"
          alt="like-icon"
        />
        <% if (locals.user){ %>
        <a
          class="toggle-like-button"
          data-likes="<%= post.likes.length %>"
          href="/likes/toggle/?id=<%=post._id%>&type=Post"
        >
          <%= post.likes.length %> Likes
        </a>
        <% }else{ %> <%= post.likes.length %> Likes <% } %>
      </small>
      <div class="post-comments-icon">
        <img
          src="https://cdn-icons.flaticon.com/png/128/4014/premium/4014104.png?token=exp=1643293150~hmac=0b72e94ef396f41074147bc78eaa4f57"
          alt="comments-icon"
        />
        <span><%= post.comments.length %></span>
      </div>
      <% if( locals.user && locals.user.id == post.user.id){ %>
      <a class="delete-post-button" href="/posts/destroy/<%= post._id %>"
        ><img
          src="https://cdn-icons.flaticon.com/png/128/2874/premium/2874821.png?token=exp=1643293372~hmac=327114326c165d8f6785d83b16f400e0"
          alt="delete-icon"
      /></a>
      <!--set class name of the button-->
      <% } %>
    </div>
    <div class="post-comment-box">
      <% if (locals.user){ %>

      <!-- let's give an id to the new comment form, we'll also need to make the same changes in home_posts.js where we're adding a post to the page -->
      <form
        id="post-<%= post._id %>-comments-form"
        action="/comments/create"
        method="POST"
      >
        <input
          type="text"
          name="content"
          placeholder="Type Here to add comment..."
          required
        />
        <input type="hidden" name="post" value="<%= post._id %>" />

        <input type="submit" value="Add Comment" />
      </form>

      <% } %>
    </div>
    <div class="post-comments-list" id="post-comments-<%= post._id %>">
      <% for (comment of post.comments){%> <%- include('_comment');%> <%} %>
    </div>
  </div>
</div>
